<%= form_with(model: @user, url: admin_create_user_path, local: false, id: "invite_user-form") do |form| %>
  <div class="field w-1/2">
    <%= form.label :email, "Enter the Email:" , class: "label" %>
    <div class="control">
      <%= form.text_field :email, class: "input", id: "email-input" %>
    </div>
  </div>
  <div class="field">
    <div class="control">
      <%= form.button(type: :submit, class: "button is-link") do %>
        <span class="icon-text">
          <span class="icon">
            <i class="fa-solid fa-user-plus"></i>
          </span>
          <span class="font-bold">Invite User</span>
        </span>
      <% end %>
    </div>
  </div>
<% end %>
<script>
  $(document).ready(function () {
    $("#invite_user-form button[type=submit]").click(function () {
      const submitForm = function(event) {
        event.preventDefault();
        const form = $(this);
        const url = form.attr('action');
        const method = form.attr('method');
        const email = form.find('input#email-input').val();
        $.ajax({
          url: url,
          method: method,
          data: { "user[email]": email, authenticity_token: $('meta[name="csrf-token"]').attr('content') },
          success: function(response) {
            form.find('input#email-input').val("");
          },
          error: function(xhr, status, error) {

          }
        });
      };
    });
  });
</script>

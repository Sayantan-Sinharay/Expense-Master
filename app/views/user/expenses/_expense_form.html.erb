<%= form_with(model: @expense, url: expenses_path, class: "expense-form", id: "new_expense_form") do |form| %>
  <div class="field">
    <%= form.label :category_id, "Select Category", class: "label" %>
    <div class="control">
      <div class="dropdown is-hoverable">
        <div class="dropdown-trigger">
          <button class="button is-primary dropdown-button" aria-haspopup="true" aria-controls="category-dropdown">
            <span id="selected-category">Select Category</span>
            <span class="icon is-small">
              <i class="fas fa-angle-down" aria-hidden="true"></i>
            </span>
          </button>
        </div>
        <div class="dropdown-menu" id="category-dropdown" role="menu">
          <div class="dropdown-content">
            <% Category.all.each do |category| %>
              <%= link_to category.name, "#", class: "dropdown-item", data: { value: category.id } %>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="field">
    <%= form.label :subcategory_id, "Select Subcategory", class: "label" %>
    <div class="control">
      <div class="dropdown is-hoverable">
        <div class="dropdown-trigger">
          <button class="button is-primary dropdown-button" aria-haspopup="true" aria-controls="subcategory-dropdown">
            <span id="selected-subcategory">Select Subcategory</span>
            <span class="icon is-small">
              <i class="fas fa-angle-down" aria-hidden="true"></i>
            </span>
          </button>
        </div>
        <div class="dropdown-menu" id="subcategory-dropdown" role="menu">
          <div class="dropdown-content">
            <% Subcategory.all.each do |subcategory| %>
              <%= link_to subcategory.name, "#", class: "dropdown-item", data: { value: subcategory.id } %>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="field">
    <%= form.label :date, "Date", class: "label" %>
    <div class="control">
      <%= form.date_field :date, class: "input" %>
    </div>
  </div>
  <div class="field">
    <%= form.label :amount, class: "label" %>
    <div class="control">
      <%= form.number_field :amount, class: "input" %>
    </div>
  </div>
  <div class="field">
    <%= form.label :notes, class: "label" %>
    <div class="control">
      <%= form.text_area :notes, class: "textarea" %>
    </div>
  </div>
  <div class="field">
    <%= form.label :attachment, class: "label" %>
    <div class="control">
      <div class="file has-name">
        <label class="file-label">
          <input class="file-input" type="file" name="attachment" id="attachment">
          <span class="file-cta">
            <span class="file-icon">
              <i class="fas fa-upload"></i>
            </span>
            <span class="file-label">
              Choose a fileâ€¦
            </span>
          </span>
          <span class="file-name">
            No file chosen
          </span>
        </label>
      </div>
    </div>
  </div>
  <div class="field">
    <div class="control">
      <%= form.submit "Create", class: "button is-primary" %>
      <%= button_tag "Add Another", class: "button is-info", id: "add_another_button" %>
      <%= link_to "Cancel", expenses_path, class: "button is-secondary" %>
    </div>
  </div>
<% end %>
